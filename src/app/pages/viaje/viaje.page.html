<ion-header>
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-back-button defaultHref=""></ion-back-button>
    </ion-buttons>
    <ion-title>Viaje</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="contenedor">
    <img src="assets/img/CaletaTortel.jpg">
    <div class="centrado">


      <ion-toolbar style="margin-top: 30px;">
        <ion-title>Caleta Tortel</ion-title>
        <ion-title size="small">7 Dias / 6 Noches</ion-title>
      </ion-toolbar>
    </div>
  </div>

  <ion-item color="light" class="titulo">
    <span>Ubicacion codigos QR</span>
  </ion-item>

  <div #map id="map"></div>
  <ion-item>
    <ion-button class="btn" slot="end" color="dark" routerLink="/qr" expand="full">
      <ion-icon name="qr-scanner"></ion-icon>
      <span style="margin-left: 10px;">Escanear QR</span>
    </ion-button>

    <ion-button class="btn2" slot="end" color="dark" (click)="myPosition()" expand="full">
      <ion-icon name="locate"></ion-icon>
      <span style="margin-left: 10px;">Mi ubicacion</span>
    </ion-button>
  </ion-item>
 

  <!-- Principio form -->
<form #form="ngForm" (ngSubmit)="upload(form)">
  <ion-slides pager="true" [options]="slideOpt">
    <ion-slide>
      <ion-grid class="stars">
        <ion-row>
          <ion-col>
            <ion-title>Valora este viaje</ion-title>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <a *ngFor="let r of rating">
              <ion-icon name="{{r.icon}}" (click)="setRating(r.value)" size="large"></ion-icon>
            </a>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-slide>
    <ion-slide>
      <ion-grid class="stars">
        <ion-row>
          <ion-col>
            <ion-title>Sube tus fotos</ion-title>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <div class="fileUpload primary">
              <ion-icon name="add-circle" size="large" color="primary"></ion-icon>
              <input type="file" class="upload" accept="image/*" (change)="addImage($event)" multiple required />
              <!-- <img [src]="profileUrl | async" /> -->
            </div>
            <div>

              <ion-img class="img" [src]="imageSrc"></ion-img>
              <ion-input type="text" [(ngModel)]="mensajeArchivo" name="file"></ion-input>
            </div>


          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-slide>
    <ion-slide>
      <ion-grid class="stars">
        <ion-row>
          <ion-col>
            <ion-title>Comenta tu viaje</ion-title>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-textarea [(ngModel)]="textarea" name="textarea"></ion-textarea>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <!-- <ion-button class="btnEnv" (click)="upload()">Enviar</ion-button> -->
          <button ion-button class="btnEnv" type="submit" block>Enviar</button>

        </ion-row>
      </ion-grid>
    </ion-slide>
  </ion-slides>
</form>
  <!-- Fin form -->



  <ion-item color="light" class="titulo">
    <span>Comentarios</span>

  </ion-item>
  <!-- <ion-list *ngFor="let item of comentarios">
    <ion-item>
        <ion-thumbnail class="perfil" slot="start"> 
            <img src="../../assets/img/socialicon.jpg">
            
          </ion-thumbnail>
      <span> {{item.comentario}} </span>
      <ion-button color="dark" (click)='verComentario(item.id)' slot="end">Ver mas</ion-button>
    </ion-item>
  </ion-list> -->


  <ion-list *ngFor="let item of comentarios">


    <ion-item class="shadow">
      <div style="margin: 10px;">
        <ion-thumbnail slot="start" style="margin-top: 0;">
          <img src="../../assets/img/socialicon.jpg">
        </ion-thumbnail>

        <div [ngSwitch]="item.valoracion">
          <div *ngSwitchCase="1">
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>

          </div>
          <div *ngSwitchCase="2">
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>

          </div>
          <div *ngSwitchCase="3">
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>

          </div>
          <div *ngSwitchCase="4">
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>

          </div>
          <div *ngSwitchCase="5">
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>
            <ion-icon name="star"></ion-icon>

          </div>
          <div *ngSwitchCaseDefault>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>
            <ion-icon name="star-outline"></ion-icon>

          </div>
        </div>

      </div>
      <div>
        <span style="font-weight: bold;">{{item.nombreUsuario}}</span>


        <div class="block-ellipsis">
          <span>{{item.comentario}}</span>
          
        </div>
        <div>
          <a (click)='verComentario(item.id)'>Ver mas</a>
        </div>
      </div>


    </ion-item>


  </ion-list>

</ion-content>